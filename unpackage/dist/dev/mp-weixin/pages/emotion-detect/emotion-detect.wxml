<view id="{{C}}" change:eS="{{uV.sS}}" eS="{{$eS[C]}}" change:eA="{{uV.sA}}" eA="{{$eA[C]}}" class="{{['container', virtualHostClass]}}" style="{{virtualHostStyle}}" hidden="{{virtualHostHidden || false}}"><view class="back-button" bindtap="{{a}}"><text class="back-icon">←</text><text class="back-text">返回</text></view><view class="header"><text class="title">情绪识别</text></view><view class="main-content"><view class="progress-bar"><view class="{{['progress-step', b && 'active', c && 'completed']}}"><view class="step-circle">1</view><text class="step-label">获取权限</text></view><view class="progress-line"></view><view class="{{['progress-step', d && 'active', e && 'completed']}}"><view class="step-circle">2</view><text class="step-label">视频录制</text></view><view class="progress-line"></view><view class="{{['progress-step', f && 'active', g && 'completed']}}"><view class="step-circle">3</view><text class="step-label">分析中</text></view></view><view wx:if="{{h}}" class="step-content permission-step"><image class="permission-icon" src="{{i}}"></image><text class="step-title">需要获取权限</text><text class="step-description">为了进行完整的情绪分析，我们需要获取麦克风和摄像头权限</text><view class="button primary-button" bindtap="{{j}}">授权并继续</view></view><view wx:if="{{k}}" class="step-content face-step"><view class="camera-container"><video wx:if="{{l}}" id="videoCapture" class="video-preview" src="{{n}}" controls change:eS="{{uV.sS}}" eS="{{$eS[m]}}" change:eA="{{uV.sA}}" eA="{{$eA[m]}}"></video><camera wx:elif="{{o}}" class="camera-preview" device-position="front" flash="off" binderror="{{p}}"></camera><view class="face-outline"></view><view wx:if="{{q}}" class="scan-line"></view></view><text class="step-title">视频录制</text><text class="step-description">{{r}}</text><view wx:if="{{s}}" class="countdown-container"><text class="countdown-text">{{t}}s</text><view class="countdown-progress" style="{{'width:' + v}}"></view></view><view wx:if="{{w}}" class="button primary-button" bindtap="{{x}}">开始录制</view><view wx:if="{{y}}" class="button-group"><view class="button secondary-button" bindtap="{{z}}">重录</view><view class="button primary-button" bindtap="{{A}}">提交分析</view></view></view><view wx:if="{{B}}" class="step-content analyzing-step"><view class="analyzing-animation"><view class="pulse-circle"></view><view class="pulse-circle delay-1"></view><view class="pulse-circle delay-2"></view></view><text class="step-title">正在分析</text><text class="step-description">我们正在处理您的情绪数据，马上完成...</text></view></view></view><wxs src="/common/uniView.wxs" module="uV"/>
