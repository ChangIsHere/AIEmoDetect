{"version":3,"file":"app.js","sources":["App.uvue","main.uts"],"sourcesContent":["<template>\n\t<view>\n\t\t<slot></slot>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\texport default {\n\t\tonLaunch() {\n\t\t\tuni.__f__('log','at App.uvue:10','App Launch')\n\t\t},\n\t\tonShow() {\n\t\t\tuni.__f__('log','at App.uvue:13','App Show')\n\t\t},\n\t\tonHide() {\n\t\t\tuni.__f__('log','at App.uvue:16','App Hide')\n\t\t}\n\t}\n</script>\n\n<style></style>","import { createSSRApp } from 'vue'\nimport App from './App.uvue'\n\n// 确保API正确初始化\nlet isAppReady = false;\n\nexport function createApp() {\n\tconst app = createSSRApp(App);\n\t\n\t// 提供全局状态管理的简单方法\n\tapp.config.globalProperties.$global = {\n\t\tisApiInitialized: false,\n\t\tapiReadyCallbacks: [],\n\t\t\n\t\t// 注册API就绪回调\n\t\tonApiReady(callback) {\n\t\t\tif (this.isApiInitialized) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis.apiReadyCallbacks.push(callback);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 标记API已初始化并触发回调\n\t\tmarkApiAsInitialized() {\n\t\t\tthis.isApiInitialized = true;\n\t\t\t\n\t\t\t// 触发所有等待的回调\n\t\t\tthis.apiReadyCallbacks.forEach(callback => {\n\t\t\t\ttry {\n\t\t\t\t\tcallback();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error('API就绪回调执行错误:', err);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// 清空回调列表\n\t\t\tthis.apiReadyCallbacks = [];\n\t\t}\n\t};\n\t\n\treturn {\n\t\tapp,\n\t\t// 初始化完成时的回调\n\t\tonLaunch() {\n\t\t\tconsole.log('App onLaunch');\n\t\t\tisAppReady = true;\n\t\t\t\n\t\t\t// 延迟一秒确保uni API加载完成\n\t\t\tsetTimeout(() => {\n\t\t\t\tapp.config.globalProperties.$global.markApiAsInitialized();\n\t\t\t\tconsole.log('标记API已初始化');\n\t\t\t}, 1500);\n\t\t}\n\t}\n}"],"names":["defineComponent","uni","createSSRApp"],"mappings":";;;;;;;;;;;AAOC,MAAA,YAAeA,cAAA,gBAAA,IAAA,cAAA;AAAA,EACd,WAAQ;AACPC,kBAAAA,MAAI,MAAM,OAAM,kBAAiB,YAAY;AAAA,EAC7C;AAAA,EACD,SAAM;AACLA,kBAAAA,MAAI,MAAM,OAAM,kBAAiB,UAAU;AAAA,EAC3C;AAAA,EACD,SAAM;AACLA,kBAAAA,MAAI,MAAM,OAAM,kBAAiB,UAAU;AAAA,EAC5C;CACD,CAAA;;;;;;;SCXe,YAAS;AACxB,QAAM,MAAMC,2BAAa,GAAG;AAG5B,MAAI,OAAO,iBAAiB,UAAU;AAAA,IACrC,kBAAkB;AAAA,IAClB,mBAAmB,CAAE;AAAA;AAAA,IAGrB,WAAW,WAAQ,MAAA;AAClB,UAAI,KAAK,kBAAkB;AAC1B;MACA,OAAM;AACN,aAAK,kBAAkB,KAAK,QAAQ;AAAA,MACpC;AAAA,IACD;AAAA;AAAA,IAGD,uBAAoB;AACnB,WAAK,mBAAmB;AAGxB,WAAK,kBAAkB,QAAQ,CAAA,WAAQ,SAAA;AACtC,YAAI;AACH;QACA,SAAQ,KAAK;AACbD,wBAAA,MAAA,MAAA,SAAA,kBAAc,gBAAgB,GAAG;AAAA,QACjC;AAAA,MACF,CAAC;AAGD,WAAK,oBAAoB;IAC1B;AAAA;AAGD,SAAO;AAAA,IACN;AAAA;AAAA,IAEA,WAAQ;AACPA,oBAAAA,MAAA,MAAA,OAAA,kBAAY,cAAc;AAI1B,iBAAW,MAAA;AACV,YAAI,OAAO,iBAAiB,QAAQ,qBAAoB;AACxDA,sBAAAA,MAAY,MAAA,OAAA,kBAAA,WAAW;AAAA,MACvB,GAAE,IAAI;AAAA,IACR;AAAA;AAEF;;;"}