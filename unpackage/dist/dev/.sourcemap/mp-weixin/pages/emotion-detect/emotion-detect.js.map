{"version":3,"file":"emotion-detect.js","sources":["pages/emotion-detect/emotion-detect.uvue","pages/emotion-detect/emotion-detect.uvue?type=page"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 返回按钮 -->\n\t\t<view class=\"back-button\" @tap=\"goBack\">\n\t\t\t<text class=\"back-icon\">←</text>\n\t\t\t<text class=\"back-text\">返回</text>\n\t\t</view>\n\t\t\n\t\t<!-- 头部 -->\n\t\t<view class=\"header\">\n\t\t\t<text class=\"title\">情绪识别</text>\n\t\t</view>\n\t\t\n\t\t<!-- 主要内容区域 -->\n\t\t<view class=\"main-content\">\n\t\t\t<!-- 检测步骤流程 -->\n\t\t\t<view class=\"progress-bar\">\n\t\t\t\t<view class=\"progress-step\" :class=\"{ active: step >= 1, completed: step > 1 }\">\n\t\t\t\t\t<view class=\"step-circle\">1</view>\n\t\t\t\t\t<text class=\"step-label\">获取权限</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"progress-line\"></view>\n\t\t\t\t<view class=\"progress-step\" :class=\"{ active: step >= 2, completed: step > 2 }\">\n\t\t\t\t\t<view class=\"step-circle\">2</view>\n\t\t\t\t\t<text class=\"step-label\">视频录制</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"progress-line\"></view>\n\t\t\t\t<view class=\"progress-step\" :class=\"{ active: step >= 3, completed: step > 3 }\">\n\t\t\t\t\t<view class=\"step-circle\">3</view>\n\t\t\t\t\t<text class=\"step-label\">分析中</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 权限获取步骤 -->\n\t\t\t<view v-if=\"step === 1\" class=\"step-content permission-step\">\n\t\t\t\t<image class=\"permission-icon\" src=\"/static/permission.png\"></image>\n\t\t\t\t<text class=\"step-title\">需要获取权限</text>\n\t\t\t\t<text class=\"step-description\">为了进行完整的情绪分析，我们需要获取麦克风和摄像头权限</text>\n\t\t\t\t<view class=\"button primary-button\" @tap=\"requestPermissions\">授权并继续</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 视频录制步骤 -->\n\t\t\t<view v-if=\"step === 2\" class=\"step-content face-step\">\n\t\t\t\t<!-- 摄像头预览区域 -->\n\t\t\t\t<view class=\"camera-container\">\n\t\t\t\t\t<video v-if=\"!isRecordingVideo && tempVideoPath\" id=\"videoCapture\" class=\"video-preview\" :src=\"tempVideoPath\" controls></video>\n\t\t\t\t\t<camera v-else-if=\"!tempVideoPath\" class=\"camera-preview\" device-position=\"front\" flash=\"off\" @error=\"handleCameraError\"></camera>\n\t\t\t\t\t<view class=\"face-outline\"></view>\n\t\t\t\t\t<view v-if=\"isRecordingVideo\" class=\"scan-line\"></view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<text class=\"step-title\">视频录制</text>\n\t\t\t\t<text class=\"step-description\">{{isRecordingVideo ? '正在录制中，请对着镜头讲述您的问题或情绪...' : (tempVideoPath ? '视频已录制完成，您可以预览或重新录制' : '点击下方按钮开始录制')}}</text>\n\t\t\t\t\n\t\t\t\t<!-- 倒计时区域 -->\n\t\t\t\t<view v-if=\"isRecordingVideo\" class=\"countdown-container\">\n\t\t\t\t\t<text class=\"countdown-text\">{{countdownValue}}s</text>\n\t\t\t\t\t<view class=\"countdown-progress\" :style=\"{width: countdownProgress + '%'}\"></view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view v-if=\"!isRecordingVideo && !tempVideoPath\" class=\"button primary-button\" @tap=\"startVideoRecording\">开始录制</view>\n\t\t\t\t<view v-if=\"!isRecordingVideo && tempVideoPath\" class=\"button-group\">\n\t\t\t\t\t<view class=\"button secondary-button\" @tap=\"discardVideo\">重录</view>\n\t\t\t\t\t<view class=\"button primary-button\" @tap=\"submitVideo\">提交分析</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 分析中步骤 -->\n\t\t\t<view v-if=\"step === 3\" class=\"step-content analyzing-step\">\n\t\t\t\t<view class=\"analyzing-animation\">\n\t\t\t\t\t<view class=\"pulse-circle\"></view>\n\t\t\t\t\t<view class=\"pulse-circle delay-1\"></view>\n\t\t\t\t\t<view class=\"pulse-circle delay-2\"></view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"step-title\">正在分析</text>\n\t\t\t\t<text class=\"step-description\">我们正在处理您的情绪数据，马上完成...</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\nimport request from '../../utils/request.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstep: 1, // 当前步骤：1-权限获取，2-视频录制，3-分析中\n\t\t\tisRecordingVideo: false, // 标记是否正在录制视频\n\t\t\tcountdownValue: 15, // 倒计时秒数，默认为15秒视频录制\n\t\t\tcountdownProgress: 100, // 倒计时进度条\n\t\t\tcountdownInterval: null,\n\t\t\tcameraContext: null,\n\t\t\thasPermissions: false,\n\t\t\ttempVideoPath: '', // 临时视频路径\n\t\t\temotionData: null  // 情绪分析数据\n\t\t}\n\t},\n\tonReady() {\n\t\t// 初始化相机上下文\n\t\tthis.cameraContext = uni.createCameraContext();\n\t},\n\tmethods: {\n\t\t// 返回上一页\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\t// 处理相机错误\n\t\thandleCameraError(err) {\n\t\t\tuni.__f__('error','at pages/emotion-detect/emotion-detect.uvue:111','相机错误:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '相机初始化失败，请检查权限',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 请求麦克风和摄像头权限\n\t\trequestPermissions() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '请求权限中...'\n\t\t\t})\n\t\t\t\n\t\t\t// 请求麦克风权限\n\t\t\tuni.authorize({\n\t\t\t\tscope: 'scope.record',\n\t\t\t\tsuccess: () => {\n\t\t\t\t\t// 请求摄像头权限\n\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\tscope: 'scope.camera',\n\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\tthis.hasPermissions = true\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '授权成功',\n\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.step = 2\n\t\t\t\t\t\t\t}, 1500)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\tthis.handlePermissionFailure()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tthis.handlePermissionFailure()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 处理权限请求失败\n\t\thandlePermissionFailure() {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '权限请求',\n\t\t\t\tcontent: '需要麦克风和摄像头权限才能进行情绪分析。请在设置中开启相关权限。',\n\t\t\t\tconfirmText: '去设置',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.openSetting()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 开始倒计时\n\t\tstartCountdown(callback) {\n\t\t\tthis.countdownValue = 15\n\t\t\tthis.countdownProgress = 100\n\t\t\t\n\t\t\t// 清除可能存在的旧倒计时\n\t\t\tif (this.countdownInterval) {\n\t\t\t\tclearInterval(this.countdownInterval)\n\t\t\t}\n\t\t\t\n\t\t\tthis.countdownInterval = setInterval(() => {\n\t\t\t\tthis.countdownValue--\n\t\t\t\tthis.countdownProgress = (this.countdownValue / 15) * 100\n\t\t\t\t\n\t\t\t\tif (this.countdownValue <= 0) {\n\t\t\t\t\tclearInterval(this.countdownInterval)\n\t\t\t\t\tcallback()\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t},\n\t\t\n\t\t// 开始视频录制\n\t\tstartVideoRecording() {\n\t\t\tif (!this.cameraContext) {\n\t\t\t\tuni.showToast({ title: '相机初始化失败', icon: 'none' })\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.isRecordingVideo = true\n\t\t\tthis.tempVideoPath = ''\n\t\t\t\n\t\t\tthis.startCountdown(() => {\n\t\t\t\tthis.stopVideoRecording()\n\t\t\t})\n\n\t\t\tthis.cameraContext.startRecord({\n\t\t\t\tduration: 15, // 录制15秒\n\t\t\t\tcompressed: true, // 启用压缩，减少文件大小\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tuni.__f__('log','at pages/emotion-detect/emotion-detect.uvue:209','视频录制完成:', res.tempFilePath)\n\t\t\t\t\tthis.tempVideoPath = res.tempFilePath\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tuni.__f__('error','at pages/emotion-detect/emotion-detect.uvue:213','视频录制失败:', err)\n\t\t\t\t\tuni.showToast({ title: '视频录制失败', icon: 'none' })\n\t\t\t\t\tthis.isRecordingVideo = false // 录制失败也停止状态\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// 监听录制停止事件（无论成功或失败）\n\t\t\tthis.cameraContext.onStop((res) => {\n\t\t\t\tuni.__f__('log','at pages/emotion-detect/emotion-detect.uvue:221','相机录制已停止', res)\n\t\t\t\tthis.isRecordingVideo = false\n\t\t\t\tif (res.tempFilePath) {\n\t\t\t\t\tthis.tempVideoPath = res.tempFilePath\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 停止视频录制\n\t\tstopVideoRecording() {\n\t\t\tclearInterval(this.countdownInterval)\n\t\t\tif (this.cameraContext) {\n\t\t\t\tthis.cameraContext.stopRecord()\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 放弃视频，重置状态以便重新录制\n\t\tdiscardVideo() {\n\t\t\tthis.tempVideoPath = ''\n\t\t\tthis.isRecordingVideo = false\n\t\t\tthis.countdownValue = 15 // 重置倒计时\n\t\t\tthis.countdownProgress = 100 // 重置进度条\n\t\t\tuni.showToast({ title: '已取消录制', icon: 'none' })\n\t\t},\n\t\t\n\t\t// 提交视频进行分析\n\t\tsubmitVideo() {\n\t\t\tif (!this.tempVideoPath) {\n\t\t\t\tuni.showToast({ title: '请先录制视频', icon: 'none' })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.step = 3 // 进入分析中步骤\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '视频分析中...',\n\t\t\t\tmask: true\n\t\t\t})\n\n\t\t\tuni.uploadFile({\n\t\t\t\turl: 'http://localhost:5000/analyze/video', // 请替换为您的实际后端接口地址\n\t\t\t\tfilePath: this.tempVideoPath,\n\t\t\t\tname: 'video', // 后端接收文件的字段名\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t}, // HBuilderX/uni-app中默认会处理\n\t\t\t\tsuccess: (uploadFileRes) => {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tconst resData = JSON.parse(uploadFileRes.data)\n\t\t\t\t\tuni.__f__('log','at pages/emotion-detect/emotion-detect.uvue:269','视频分析结果:', resData)\n\t\t\t\t\tthis.emotionData = resData\n\t\t\t\t\tuni.showToast({ title: '分析完成', icon: 'success' })\n\t\t\t\t\t// 跳转到结果页\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.goToResultPage()\n\t\t\t\t\t}, 1000)\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tuni.__f__('error','at pages/emotion-detect/emotion-detect.uvue:279','视频上传或分析失败:', err)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '视频分析失败，请重试',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 3000\n\t\t\t\t\t})\n\t\t\t\t\t// 失败后回到视频录制步骤，允许重试\n\t\t\t\t\tthis.step = 2\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到结果页\n\t\tgoToResultPage() {\n\t\t\tif (this.emotionData) {\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: '/pages/emotion-result/emotion-result?data=' + encodeURIComponent(JSON.stringify(this.emotionData))\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showToast({ title: '未获取到分析数据', icon: 'none' })\n\t\t\t\t// 如果没有数据，回到初始或录制页面\n\t\t\t\tthis.step = 2\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.container {\n\theight: 100vh;\n\tbackground-color: #050410;\n\tbackground-image: linear-gradient(-45deg, #4f00bc, #7d1b7e, #0f0c29, #2a0845, #12c2e9);\n\tbackground-size: 400% 400%;\n\tanimation: gradient-bg 12s ease infinite;\n\tpadding: 60rpx 40rpx;\n\tbox-sizing: border-box;\n\tposition: relative;\n}\n\n@keyframes gradient-bg {\n\t0% { background-position: 0% 50%; }\n\t50% { background-position: 100% 50%; }\n\t100% { background-position: 0% 50%; }\n}\n\n.back-button {\n\tposition: absolute;\n\ttop: 60rpx;\n\tleft: 30rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10rpx;\n\tz-index: 10;\n}\n\n.back-icon {\n\tfont-size: 36rpx;\n\tcolor: #ffffff;\n\tmargin-right: 10rpx;\n}\n\n.back-text {\n\tfont-size: 30rpx;\n\tcolor: #ffffff;\n}\n\n.header {\n\tmargin-top: 40rpx;\n\ttext-align: center;\n}\n\n.title {\n\tfont-size: 48rpx;\n\tcolor: #ffffff;\n\tfont-weight: bold;\n}\n\n.main-content {\n\tmargin-top: 80rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\theight: calc(100vh - 200rpx);\n}\n\n/* 进度条样式 */\n.progress-bar {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 90%;\n\tmargin-bottom: 60rpx;\n}\n\n.progress-step {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\twidth: 150rpx;\n}\n\n.step-circle {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 30rpx;\n\tbackground: rgba(255, 255, 255, 0.3);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tcolor: #ffffff;\n\tfont-weight: bold;\n\tmargin-bottom: 20rpx;\n}\n\n.progress-step.active .step-circle {\n\tbackground: #6847c2;\n}\n\n.progress-step.completed .step-circle {\n\tbackground: #32cd32;\n}\n\n.step-label {\n\tfont-size: 26rpx;\n\tcolor: #ffffff;\n}\n\n.progress-line {\n\tflex: 1;\n\theight: 4rpx;\n\tbackground: rgba(255, 255, 255, 0.3);\n\tmargin: 0 10rpx;\n\tmargin-bottom: 20rpx;\n}\n\n/* 步骤内容样式 */\n.step-content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 40rpx;\n\tbox-sizing: border-box;\n\tanimation: fade-in 0.3s ease;\n}\n\n@keyframes fade-in {\n\tfrom { opacity: 0; transform: translateY(20rpx); }\n\tto { opacity: 1; transform: translateY(0); }\n}\n\n.step-title {\n\tfont-size: 40rpx;\n\tcolor: #ffffff;\n\tmargin-bottom: 30rpx;\n\ttext-align: center;\n}\n\n.step-description {\n\tfont-size: 30rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n\ttext-align: center;\n\tmargin-bottom: 60rpx;\n\tline-height: 1.5;\n}\n\n.button {\n\twidth: 350rpx;\n\theight: 90rpx;\n\tborder-radius: 45rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 32rpx;\n\tmargin-top: 40rpx;\n}\n\n.button-group {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\twidth: 100%;\n\tpadding: 0 50rpx;\n}\n\n.primary-button {\n\tbackground: #6847c2;\n\tcolor: #ffffff;\n\tbox-shadow: 0 8rpx 20rpx rgba(104, 71, 194, 0.4);\n}\n\n.secondary-button {\n\tbackground: rgba(255, 255, 255, 0.2);\n\tcolor: #ffffff;\n\tborder: 1rpx solid rgba(255, 255, 255, 0.5);\n}\n\n.primary-button:active, .secondary-button:active {\n\ttransform: scale(0.98);\n\tbox-shadow: 0 4rpx 10rpx rgba(104, 71, 194, 0.4);\n}\n\n/* 权限步骤样式 */\n.permission-icon {\n\twidth: 180rpx;\n\theight: 180rpx;\n\tmargin-bottom: 40rpx;\n}\n\n/* 视频录制步骤样式 */\n.video-preview {\n\twidth: 200rpx;\n\theight: 200rpx;\n\tmargin-bottom: 40rpx;\n}\n\n/* 面部扫描步骤样式 */\n.camera-container {\n\twidth: 400rpx;\n\theight: 400rpx;\n\tposition: relative;\n\tmargin-bottom: 40rpx;\n\toverflow: hidden;\n\tborder-radius: 200rpx;\n}\n\n.camera-preview {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.video-preview {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover;\n}\n\n.face-outline {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tborder: 4rpx dashed rgba(255, 255, 255, 0.8);\n\tborder-radius: 50%;\n\tz-index: 5;\n\tpointer-events: none;\n}\n\n.scan-line {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 4rpx;\n\tbackground: rgba(104, 71, 194, 0.8);\n\tbox-shadow: 0 0 10rpx #6847c2;\n\tanimation: scan 2s ease-in-out infinite;\n\tz-index: 6;\n\tpointer-events: none;\n}\n\n@keyframes scan {\n\t0% { transform: translateY(0); }\n\t50% { transform: translateY(400rpx); }\n\t100% { transform: translateY(0); }\n}\n\n/* 倒计时样式 */\n.countdown-container {\n\twidth: 100%;\n\theight: 40rpx;\n\tbackground: rgba(255, 255, 255, 0.2);\n\tborder-radius: 20rpx;\n\tmargin: 20rpx 0;\n\tposition: relative;\n\toverflow: hidden;\n}\n\n.countdown-progress {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\theight: 100%;\n\tbackground: rgba(104, 71, 194, 0.8);\n\tborder-radius: 20rpx;\n\ttransition: width 1s linear;\n}\n\n.countdown-text {\n\tposition: absolute;\n\twidth: 100%;\n\ttext-align: center;\n\tline-height: 40rpx;\n\tcolor: #ffffff;\n\tfont-weight: bold;\n\tz-index: 1;\n}\n\n/* 分析中步骤样式 */\n.analyzing-animation {\n\twidth: 200rpx;\n\theight: 200rpx;\n\tposition: relative;\n\tmargin-bottom: 40rpx;\n}\n\n.pulse-circle {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\twidth: 100rpx;\n\theight: 100rpx;\n\tbackground: rgba(104, 71, 194, 0.2);\n\tborder-radius: 50%;\n\tanimation: pulse-out 2s infinite;\n}\n\n.pulse-circle.delay-1 {\n\tanimation-delay: 0.5s;\n}\n\n.pulse-circle.delay-2 {\n\tanimation-delay: 1s;\n}\n\n@keyframes pulse-out {\n\t0% {\n\t\ttransform: translate(-50%, -50%) scale(0.8);\n\t\topacity: 1;\n\t}\n\t100% {\n\t\ttransform: translate(-50%, -50%) scale(2);\n\t\topacity: 0;\n\t}\n}\n</style> ","import MiniProgramPage from '/Users/peggy/Documents/HBuilderProjects/AI EmoDetect/AIEmoDetect/pages/emotion-detect/emotion-detect.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}