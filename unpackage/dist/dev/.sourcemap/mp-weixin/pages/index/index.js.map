{"version":3,"file":"index.js","sources":["pages/index/index.uvue","pages/index/index.uvue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n\t\t<!-- 顶部温馨欢迎区 -->\n\t\t<view class=\"welcome-header\">\n\t\t\t<view class=\"welcome-card\">\n\t\t\t\t<view class=\"ai-avatar\">🤖</view>\n\t\t\t\t<view class=\"welcome-text\">\n\t\t\t\t\t<text class=\"welcome-title\">Hi，欢迎回来！</text>\n\t\t\t\t\t<text class=\"welcome-tip\">🌈 今日温馨提示：保持微笑，世界会更美好！</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 粒子效果层 -->\n\t\t<view class=\"particles\">\n\t\t\t<view v-for=\"i in 20\" :key=\"i\" class=\"particle\"></view>\n\t\t</view>\n\n\t\t<view class=\"top-section\">\n\t\t\t<view class=\"face-container\">\n\t\t\t\t<view class=\"eye\"></view>\n\t\t\t\t<view class=\"eye\"></view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 聊天区卡片 -->\n\t\t<view class=\"chat-card\">\n\t\t\t<scroll-view class=\"chat-box\" scroll-y=\"true\" :scroll-top=\"scrollTop\" :scroll-with-animation=\"true\">\n\t\t\t\t<view class=\"ai-message\" style=\"animation-duration: 0.3s\">\n\t\t\t\t\t<view class=\"chat-message\">你好！你今天过的还好吗？或许你的心情难以用言语形容，那让我来给你做一个心理检测怎么样！</view>\n\t\t\t\t</view>\n\t\t\t\t<view v-for=\"(message, index) in messages\" :key=\"message.id\" :class=\"message.type === 'user' ? 'user-message' : 'ai-message'\">\n\t\t\t\t\t<view class=\"chat-message\">{{ message.content }}</view>\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"loading\" class=\"ai-message loading-message\">\n\t\t\t\t\t<view class=\"loading-dots\">\n\t\t\t\t\t\t<view class=\"dot\"></view>\n\t\t\t\t\t\t<view class=\"dot\"></view>\n\t\t\t\t\t\t<view class=\"dot\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\n\t\t<!-- 输入区卡片 -->\n\t\t<view class=\"input-card\">\n\t\t\t<input class=\"chat-input\" type=\"text\" v-model=\"userInput\" placeholder=\"输入你的心情...\" @click=\"handleInputClick\" confirm-type=\"send\" @confirm=\"handleSend\" :disabled=\"loading\" />\n\t\t\t<view class=\"send-button\" @tap=\"handleSend\" :class=\"{ 'disabled': loading }\">发送</view>\n\t\t</view>\n\t\t\n\t\t<!-- 情绪检测推荐弹窗 -->\n\t\t<view v-if=\"showEmotionModal\" class=\"emotion-modal\" @touchmove.stop.prevent>\n\t\t\t<view class=\"emotion-modal-content\">\n\t\t\t\t<view class=\"modal-close\" @tap=\"closeEmotionModal\">×</view>\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">AI情绪分析</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-body\">\n\t\t\t\t\t<text class=\"modal-text\">通过分析您的对话，我们发现您最近的情绪可能波动较大。</text>\n\t\t\t\t\t<text class=\"modal-text\">想要进行更精确的情绪分析吗？</text>\n\t\t\t\t\t<text class=\"modal-description\">我们将通过语音和面部表情来综合评估您的情绪状态，帮助您更好地了解自己。</text>\n\t\t\t\t\t<view class=\"modal-icon\">\n\t\t\t\t\t\t<view class=\"pulse-circle\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-footer\">\n\t\t\t\t\t<view class=\"modal-button cancel\" @tap=\"closeEmotionModal\">稍后再说</view>\n\t\t\t\t\t<view class=\"modal-button primary\" @tap=\"startEmotionDetection\">立即检测</view>\n\t\t\t\t</view>\n\t\t\t</view>\n    </view>\n    <!-- 底部隐私说明卡片 -->\n    <view class=\"privacy-footer-card\">\n      <text class=\"privacy-icon\">🔒</text>\n      <text class=\"privacy-text\">数据加密传输，保护您的隐私</text>\n    </view>\n    <!-- 右下角悬浮设置按钮 -->\n    <view class=\"fab-setting\" @tap=\"onSettingTap\">\n      <text class=\"fab-icon\">⚙️</text>\n    </view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nimport request from '../../utils/request.js'\n\nconst negativeKeywords = [\n  \"难受\", \"心情不好\", \"自杀\", \"焦虑\", \"恐慌\", \"抑慌\", \"不想活\", \"压力大\", \"很累\", \"绝望\", \"无助\", \"烦躁\",\n  \"痛苦\", \"崩溃\", \"想哭\", \"不开心\", \"伤心\", \"失眠\", \"没意义\", \"想放弃\", \"没人懂\", \"孤独\", \"害怕\", \"恐惧\",\n  \"烦\", \"累\", \"不想说话\", \"不想动\", \"不想见人\", \"不想上班\", \"不想上学\", \"没动力\", \"没希望\", \"想死\", \"想离开\",\n  \"烦闷\", \"心累\", \"心痛\", \"绝望\", \"麻木\", \"无感\", \"无聊\", \"无助\", \"无望\", \"不想活了\", \"撑不住\", \"撑不下去\",\n  \"情绪低落\", \"消沉\", \"郁闷\", \"闷闷不乐\", \"萎靡不振\", \"沮丧\", \"悲伤\", \"哀伤\", \"愁苦\", \"失落\", \"灰心\", \"失望\",\n  \"愤懑\", \"恼怒\", \"火大\", \"暴躁\", \"狂躁\", \"怨恨\", \"厌恶\", \"憎恨\", \"反感\", \"不满\", \"气愤\",\n  \"紧张\", \"担忧\", \"忧虑\", \"不安\", \"手足无措\", \"心烦意乱\", \"忐忑\", \"惊恐\", \"骇然\", \"毛骨悚然\", \"不寒而栗\",\n  \"寂寞\", \"孤单\", \"空虚\", \"失落\", \"无聊\", \"空虚\", \"迷茫\", \"彷徨\", \"困惑\",\n  \"疲惫\", \"精疲力尽\", \"身心俱疲\", \"筋疲力尽\", \"虚弱\", \"乏力\", \"力不从心\", \"透支\",\n  \"厌世\", \"生无可恋\", \"了无生趣\", \"苟延残喘\", \"行尸走肉\", \"自我否定\", \"自我怀疑\", \"无地自容\", \"羞愧\", \"内疚\",\n  \"逃避\", \"躲避\", \"退缩\", \"不敢面对\", \"不敢想\", \"不想提\", \"忘不掉\", \"放不下\", \"走不出来\"\n];\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tmessages: [] as Array<{ content: string; type: 'user' | 'ai'; id: number }>,\n\t\t\tuserInput: '',\n\t\t\tkeyboardHeight: 0,\n\t\t\tanimating: false,\n\t\t\tscrollTop: 0,\n\t\t\tloading: false,\n\t\t\tmessageCount: 0,\n\t\t\tshowEmotionModal: false,\n\t\t\tsessionId: 'user_' + Date.now(), // 为每个用户创建唯一的会话ID\n\t\t\temotionCounter: 0, // 在新逻辑中此变量的作用减弱\n\t\t\tlastShowPromptTime: 0 // 上次提示情绪扫描的时间\n\t\t}\n\t},\n\tmethods: {\n\t\t// 新增：检测消息是否包含负面关键词\n\t\tcontainsNegativeKeyword(msg) {\n\t\t\treturn negativeKeywords.some(word => msg.includes(word));\n\t\t},\n\t\t// 新增：检测AI回复中是否包含情绪扫描推荐关键词\n\t\tcontainsAIRecommendedKeyword(response) {\n\t\t\tconst promptKeywords = ['情绪扫描', '情绪分析', '检测你的情绪', '心理检测', '情绪波动',\n\t\t\t\t'情绪状态', '心情如何', '心理状况', '需要帮助', '看起来很', '建议你', '似乎你在',\n\t\t\t\t'或许你需要', '我感受到你的', '看起来你可能在', '你的语气显示', '让我们一起'\n\t\t\t];\n\t\t\tconst emotionWordsInAIResponse = ['伤心', '难过', '焦虑', '担忧', '生气', '愤怒', '恐惧',\n\t\t\t\t'紧张', '压力', '困扰', '烦恼', '消极', '抑郁', '悲观'\n\t\t\t];\n\n\t\t\tlet foundPromptKeyword = promptKeywords.some(keyword => response.includes(keyword));\n\t\t\tlet emotionWordCount = emotionWordsInAIResponse.filter(word => response.includes(word)).length;\n\n\t\t\treturn foundPromptKeyword || (emotionWordCount >= 2);\n\t\t},\n\n\t\t// 统一的情绪检测触发逻辑\n\t\trunComprehensiveEmotionCheck() {\n\t\t\t// 确保至少聊了3句（用户消息和AI回复总和）才开始检测\n\t\t\tif (this.messageCount < 3) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 检查冷却时间，避免频繁弹窗（5分钟 = 300000毫秒）\n\t\t\tif (Date.now() - this.lastShowPromptTime < 300000) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet shouldTriggerModal = false;\n\n\t\t\t// 遍历所有消息（用户和AI的），检测关键词\n\t\t\tfor (const message of this.messages) {\n\t\t\t\tif (message.type === 'user') {\n\t\t\t\t\tif (this.containsNegativeKeyword(message.content)) {\n\t\t\t\t\t\tshouldTriggerModal = true;\n\t\t\t\t\t\tbreak; // 发现关键词即可触发\n\t\t\t\t\t}\n\t\t\t\t} else if (message.type === 'ai') {\n\t\t\t\t\t// 如果AI回复中包含情绪相关的关键词或AI推荐词\n\t\t\t\t\tif (this.containsAIRecommendedKeyword(message.content)) {\n\t\t\t\t\t\tshouldTriggerModal = true;\n\t\t\t\t\t\tbreak; // 发现关键词即可触发\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (shouldTriggerModal && !this.showEmotionModal) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.showEmotionModal = true;\n\t\t\t\t\tthis.lastShowPromptTime = Date.now();\n\t\t\t\t}, 1000); // 延迟1秒显示弹窗，更自然\n\t\t\t}\n\t\t},\n\n\t\t// 处理消息发送\n\t\thandleSend() {\n\t\t\tif (!this.userInput.trim() || this.animating || this.loading) return\n\n\t\t\tconst userText = this.userInput.trim()\n\t\t\tthis.userInput = ''\n\t\t\tthis.animating = true\n\t\t\tthis.loading = true\n\n\t\t\t// 添加用户消息\n\t\t\tthis.messages.push({\n\t\t\t\tcontent: userText,\n\t\t\t\ttype: 'user',\n\t\t\t\tid: Date.now()\n\t\t\t})\n\n\t\t\t// 消息发送后滚动到底部\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom()\n\n\t\t\t\t// 调用API获取回复\n\t\t\t\tthis.getAIResponse(userText)\n\n\t\t\t\t// 增加消息计数\n\t\t\t\tthis.messageCount++\n\n\t\t\t\t// 每次用户发送消息后，运行全面的情绪检测\n\t\t\t\tthis.runComprehensiveEmotionCheck()\n\t\t\t})\n\t\t},\n\n\t\t// 调用API获取AI响应\n\t\tgetAIResponse(userText) {\n\t\t\t// 显示加载指示器\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '分析中...',\n\t\t\t\tmask: false\n\t\t\t});\n\n\t\t\t// 使用真实的LLM API\n\t\t\trequest.chatWithLLM({\n\t\t\t\tmessage: userText,\n\t\t\t\tsessionId: this.sessionId\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tuni.hideLoading(); // 提前隐藏loading\n\t\t\t\tuni.__f__('log','at pages/index/index.uvue:222','LLM响应:', res);\n\n\t\t\t\tconst response = res.response_text;\n\n\t\t\t\tif (response) {\n\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\tcontent: response,\n\t\t\t\t\t\ttype: 'ai',\n\t\t\t\t\t\tid: Date.now()\n\t\t\t\t\t});\n\t\t\t\t\t// AI回复后也进行全面的情绪检测\n\t\t\t\t\tthis.runComprehensiveEmotionCheck();\n\t\t\t\t} else {\n\t\t\t\t\tuni.__f__('warn','at pages/index/index.uvue:235','LLM响应中未找到response_text或其为空:', res);\n\t\t\t\t\tuni.showToast({ title: 'AI响应内容为空', icon: 'none', duration: 2000 });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tuni.hideLoading(); // 提前隐藏loading\n\t\t\t\tuni.__f__('error','at pages/index/index.uvue:241','LLM请求失败:', JSON.stringify(err, null, 2)); // 打印完整的错误对象\n\t\t\t\tlet errorMessage = 'AI服务暂时不可用';\n\t\t\t\tif (err) {\n\t\t\t\t\tif (err.message) {\n\t\t\t\t\t\terrorMessage = err.message;\n\t\t\t\t\t}\n\t\t\t\t\tif (err.detail) {\n\t\t\t\t\t\tif (typeof err.detail === 'string') {\n\t\t\t\t\t\t\terrorMessage += `: ${err.detail}`;\n\t\t\t\t\t\t} else if (err.detail.length > 0 && err.detail[0].msg) {\n\t\t\t\t\t\t\terrorMessage += `: ${err.detail[0].msg}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tuni.showToast({ title: errorMessage, icon: 'none', duration: 4000 });\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\tsetTimeout(() => { this.animating = false; }, 300);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t// 处理输入框点击\n\t\thandleInputClick() {\n\t\t\t// 简化的输入框点击处理，根据实际需要扩展\n\t\t},\n\n\t\t// 滚动到底部 - 使用scroll-view的滚动特性\n\t\tscrollToBottom() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst query = uni.createSelectorQuery().in(this)\n\t\t\t\tquery.selectAll('.chat-box view').boundingClientRect(data => {\n\t\t\t\t\tif (data && data.length > 0) {\n\t\t\t\t\t\tthis.scrollTop = 10000\n\t\t\t\t\t}\n\t\t\t\t}).exec()\n\t\t\t}, 100)\n\t\t},\n\n\t\t// 关闭情绪检测弹窗\n\t\tcloseEmotionModal() {\n\t\t\tthis.showEmotionModal = false\n\t\t},\n\n\t\t// 开始情绪检测\n\t\tstartEmotionDetection() {\n\t\t\tthis.closeEmotionModal()\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/emotion-detect/emotion-detect'\n\t\t\t})\n\t\t},\n\t\tonSettingTap() {\n\t\t\tuni.showToast({ title: '设置功能开发中...', icon: 'none' });\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.container {\n  min-height: 100vh;\n  background-color: #050410;\n  background-image: linear-gradient(-45deg, #4f00bc, #7d1b7e, #0f0c29, #2a0845, #12c2e9);\n  background-size: 400% 400%;\n  animation: gradient-bg 12s ease infinite;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32rpx 0 32rpx 0;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n}\n\n.container::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: \n    radial-gradient(circle at 20% 30%, rgba(79, 0, 188, 0.3) 0%, transparent 50%),\n    radial-gradient(circle at 80% 70%, rgba(18, 194, 233, 0.3) 0%, transparent 50%);\n  animation: pulse-bg 18s ease-in-out infinite alternate;\n  z-index: 0;\n  will-change: opacity, transform;\n}\n\n/* 粒子效果 */\n.particles {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 0;\n}\n\n.particle {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.4);\n  border-radius: 50%;\n  pointer-events: none;\n}\n\n.particle:nth-child(1) { width: 1.5rpx; height: 1.5rpx; top: 10%; left: 20%; animation: float 60s linear infinite; }\n.particle:nth-child(2) { width: 3rpx; height: 3rpx; top: 20%; left: 80%; animation: float 45s linear infinite; }\n.particle:nth-child(3) { width: 0.8rpx; height: 0.8rpx; top: 30%; left: 15%; animation: float 70s linear infinite; }\n.particle:nth-child(4) { width: 2.5rpx; height: 2.5rpx; top: 40%; left: 90%; animation: float 55s linear infinite; }\n.particle:nth-child(5) { width: 1.5rpx; height: 1.5rpx; top: 50%; left: 60%; animation: float 80s linear infinite; }\n.particle:nth-child(6) { width: 4rpx; height: 4rpx; top: 60%; left: 25%; animation: float 40s linear infinite; }\n.particle:nth-child(7) { width: 1.5rpx; height: 1.5rpx; top: 70%; left: 75%; animation: float 65s linear infinite; }\n.particle:nth-child(8) { width: 0.8rpx; height: 0.8rpx; top: 80%; left: 35%; animation: float 75s linear infinite; }\n.particle:nth-child(9) { width: 2.5rpx; height: 2.5rpx; top: 90%; left: 50%; animation: float 50s linear infinite; }\n.particle:nth-child(10) { width: 3rpx; height: 3rpx; top: 15%; left: 65%; animation: float 85s linear infinite; }\n.particle:nth-child(11) { width: 1.5rpx; height: 1.5rpx; top: 25%; left: 40%; animation: float 90s linear infinite; }\n.particle:nth-child(12) { width: 0.8rpx; height: 0.8rpx; top: 35%; left: 85%; animation: float 60s linear infinite; }\n.particle:nth-child(13) { width: 2.5rpx; height: 2.5rpx; top: 45%; left: 5%; animation: float 70s linear infinite; }\n.particle:nth-child(14) { width: 1.5rpx; height: 1.5rpx; top: 55%; left: 45%; animation: float 55s linear infinite; }\n.particle:nth-child(15) { width: 3rpx; height: 3rpx; top: 65%; left: 95%; animation: float 65s linear infinite; }\n.particle:nth-child(16) { width: 2.5rpx; height: 2.5rpx; top: 75%; left: 55%; animation: float 80s linear infinite; }\n.particle:nth-child(17) { width: 0.8rpx; height: 0.8rpx; top: 85%; left: 30%; animation: float 45s linear infinite; }\n.particle:nth-child(18) { width: 1.5rpx; height: 1.5rpx; top: 95%; left: 70%; animation: float 50s linear infinite; }\n.particle:nth-child(19) { width: 3rpx; height: 3rpx; top: 5%; left: 10%; animation: float 75s linear infinite; }\n.particle:nth-child(20) { width: 2.5rpx; height: 2.5rpx; top: 93%; left: 13%; animation: float 60s linear infinite; }\n\n@keyframes float {\n  0% { transform: translateY(0) translateX(0); }\n  50% { transform: translateY(-200px) translateX(100px); }\n  100% { transform: translateY(-400px) translateX(0); opacity: 0; }\n}\n\n@keyframes gradient-bg {\n  0% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n  100% { background-position: 0% 50%; }\n}\n\n@keyframes pulse-bg {\n  0% { opacity: 0.5; }\n  50% { opacity: 0.7; }\n  100% { opacity: 0.5; }\n}\n\n.top-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  margin-top: 20rpx; /* 进一步缩小顶部间距 */\n  position: relative;\n  z-index: 1;\n}\n\n.face-container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 20rpx; /* 进一步缩小间距 */\n}\n\n.eye {\n  width: 80rpx;\n  height: 100rpx;\n  background: linear-gradient(135deg, #fff, #f0f0f0);\n  border-radius: 50% / 100%;\n  box-shadow: 0 0 12rpx rgba(255, 255, 255, 0.7);\n  animation: eye-blink 6s infinite ease-in-out;\n  margin: 0 30rpx;\n  position: relative;\n  overflow: hidden;\n}\n\n@keyframes eye-blink {\n  0%, 20%, 40%, 60%, 80%, 100% { transform: scaleY(1); }\n  25%, 55%, 85% { transform: scaleY(0.1); }\n}\n\n.chat-card {\n  width: 92vw;\n  max-width: 700rpx;\n  min-height: 420rpx;\n  background: rgba(255,255,255,0.10);\n  border-radius: 32rpx;\n  box-shadow: 0 6rpx 32rpx 0 rgba(80,60,180,0.10);\n  padding: 24rpx 18rpx 24rpx 18rpx;\n  margin: 0 auto 18rpx auto;\n  backdrop-filter: blur(8rpx);\n  border: 1.5rpx solid rgba(255,255,255,0.13);\n  z-index: 1;\n}\n\n.chat-box {\n  flex: 1;\n  width: 90%; /* 缩小宽度以留出更多边距 */\n  margin: 20rpx auto; /* 居中并增加上下间距 */\n  padding: 20rpx; /* 增加内边距 */\n  background-color: rgba(255, 255, 255, 0.1); /* 添加背景 */\n  border-radius: 20rpx; /* 圆角 */\n  box-shadow: 0 5rpx 15rpx rgba(0, 0, 0, 0.2); /* 阴影 */\n  box-sizing: border-box;\n  overflow-y: auto;\n  /* margin-bottom: 15rpx; 已合并到margin */\n}\n\n.ai-message,\n.user-message {\n  max-width: 70%; /* 进一步缩小最大宽度 */\n  margin-bottom: 10rpx; /* 缩小底部边距 */\n  padding: 15rpx 20rpx; /* 进一步缩小内边距 */\n  border-radius: 20rpx; /* 缩小圆角 */\n  position: relative;\n  animation: message-in 0.3s ease-out forwards;\n  word-wrap: break-word;\n  display: block;\n}\n\n.chat-message {\n  font-size: 26rpx; /* 进一步缩小字体大小 */\n  line-height: 1.3; /* 调整行高 */\n}\n\n.ai-message {\n  background-color: rgba(255, 255, 255, 0.1);\n  color: #ffffff;\n  align-self: flex-start;\n  margin-right: auto;\n  border-bottom-left-radius: 6rpx; /* 进一步缩小圆角 */\n}\n\n.user-message {\n  background-color: #6847c2;\n  color: #ffffff;\n  align-self: flex-end;\n  margin-left: auto;\n  border-bottom-right-radius: 6rpx; /* 进一步缩小圆角 */\n}\n\n/* 加载消息动画 */\n.loading-message {\n  background-color: rgba(255, 255, 255, 0.1);\n  color: #ffffff;\n  align-self: flex-start;\n  margin-right: auto;\n  border-bottom-left-radius: 6rpx; /* 进一步缩小圆角 */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 60rpx; /* 进一步缩小最小高度 */\n}\n\n.loading-dots {\n  display: flex;\n}\n\n.dot {\n  width: 12rpx; /* 进一步缩小点 */\n  height: 12rpx; /* 进一步缩小点 */\n  background-color: #fff;\n  border-radius: 50%;\n  margin: 0 2rpx; /* 进一步缩小间距 */\n  animation: bounce 1.4s infinite ease-in-out;\n}\n\n.dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes bounce {\n  0%, 80%, 100% { transform: scale(0); }\n  40% { transform: scale(1); }\n}\n\n@keyframes message-in {\n  from { opacity: 0; transform: translateY(10rpx); } /* 进一步缩小位移 */\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.input-card {\n  width: 92vw;\n  max-width: 700rpx;\n  display: flex;\n  align-items: center;\n  background: rgba(255,255,255,0.13);\n  border-radius: 32rpx;\n  box-shadow: 0 4rpx 16rpx 0 rgba(80,60,180,0.10);\n  padding: 12rpx 18rpx 12rpx 24rpx;\n  margin: 0 auto 18rpx auto;\n  backdrop-filter: blur(8rpx);\n  border: 1.5rpx solid rgba(255,255,255,0.15);\n  z-index: 2;\n}\n\n.chat-input {\n  flex: 1;\n  font-size: 28rpx;\n  border: none;\n  outline: none;\n  background: transparent;\n  color: #fff;\n  padding: 10rpx 0;\n}\n\n.send-button {\n  margin-left: 18rpx;\n  padding: 0 32rpx;\n  height: 56rpx;\n  line-height: 56rpx;\n  border-radius: 28rpx;\n  background: linear-gradient(90deg, #7d1b7e 0%, #4f00bc 100%);\n  color: #fff;\n  font-weight: 600;\n  font-size: 28rpx;\n  box-shadow: 0 2rpx 8rpx #4f00bc33;\n  transition: background 0.2s, box-shadow 0.2s;\n}\n.send-button.disabled {\n  opacity: 0.5;\n  background: #b0b0c0;\n  box-shadow: none;\n}\n\n.privacy-footer-card {\n  width: 92vw;\n  max-width: 700rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 14rpx 0 10rpx 0;\n  margin: 0 auto 0 auto;\n  background: rgba(20, 20, 40, 0.7);\n  border-radius: 24rpx;\n  box-shadow: 0 2rpx 8rpx #4f00bc22;\n  border: 1.5rpx solid rgba(255,255,255,0.10);\n  z-index: 2;\n  position: relative;\n}\n\n.fab-setting {\n  position: fixed;\n  right: 38rpx;\n  bottom: 54rpx;\n  width: 88rpx;\n  height: 88rpx;\n  background: linear-gradient(135deg, #4f00bc 0%, #12c2e9 100%);\n  border-radius: 50%;\n  box-shadow: 0 4rpx 16rpx #4f00bc55;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 99;\n  cursor: pointer;\n  transition: box-shadow 0.2s;\n}\n.fab-setting:active {\n  box-shadow: 0 2rpx 6rpx #4f00bc33;\n}\n.fab-icon {\n  font-size: 44rpx;\n  color: #fff;\n}\n\n/* 情绪检测推荐弹窗样式 */\n.emotion-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.emotion-modal-content {\n  background: linear-gradient(135deg, #4f00bc, #7d1b7e);\n  border-radius: 20rpx; /* 进一步缩小圆角 */\n  padding: 25rpx; /* 进一步缩小内边距 */\n  width: 90%; /* 进一步调整宽度 */\n  max-width: 450rpx; /* 进一步缩小最大宽度 */\n  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.3); /* 进一步缩小阴影 */\n  text-align: center;\n  position: relative;\n  animation: modal-fade-in 0.3s ease-out;\n}\n\n@keyframes modal-fade-in {\n  from { opacity: 0; transform: translateY(-30rpx) scale(0.98); } /* 进一步缩小位移和缩放 */\n  to { opacity: 1; transform: translateY(0) scale(1); }\n}\n\n.modal-close {\n  position: absolute;\n  top: 10rpx; /* 进一步缩小位置 */\n  right: 20rpx; /* 进一步缩小位置 */\n  font-size: 32rpx; /* 进一步缩小字体 */\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n}\n\n.modal-header {\n  margin-bottom: 20rpx; /* 进一步缩小底部边距 */\n}\n\n.modal-title {\n  font-size: 36rpx; /* 进一步缩小字体 */\n  color: #ffffff;\n  font-weight: bold;\n}\n\n.modal-body {\n  margin-bottom: 25rpx; /* 进一步缩小底部边距 */\n}\n\n.modal-text {\n  font-size: 26rpx; /* 进一步缩小字体 */\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 1.3; /* 调整行高 */\n  margin-bottom: 6rpx; /* 进一步缩小底部边距 */\n  display: block;\n}\n\n.modal-description {\n  font-size: 24rpx; /* 进一步缩小字体 */\n  color: rgba(255, 255, 255, 0.7);\n  margin-top: 10rpx; /* 进一步缩小顶部边距 */\n}\n\n.modal-icon {\n  width: 80rpx; /* 进一步缩小图标 */\n  height: 80rpx; /* 进一步缩小图标 */\n  background-color: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 25rpx auto; /* 进一步缩小边距 */\n  position: relative;\n}\n\n.modal-icon .pulse-circle {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.3);\n  animation: modal-pulse 1.5s infinite;\n}\n\n@keyframes modal-pulse {\n  0% { transform: scale(1); opacity: 1; }\n  100% { transform: scale(1.2); opacity: 0; } /* 进一步缩小缩放 */\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: space-around;\n  margin-top: 25rpx; /* 进一步缩小顶部边距 */\n}\n\n.modal-button {\n  padding: 12rpx 25rpx; /* 进一步缩小内边距 */\n  border-radius: 20rpx; /* 进一步缩小圆角 */\n  font-size: 26rpx; /* 进一步缩小字体 */\n  cursor: pointer;\n  transition: transform 0.1s ease;\n}\n\n.modal-button:active {\n  transform: scale(0.95);\n}\n\n.modal-button.cancel {\n  background-color: rgba(255, 255, 255, 0.2);\n  color: #ffffff;\n}\n\n.modal-button.primary {\n  background-color: #fff;\n  color: #6847c2;\n}\n\n.welcome-header {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding: 24rpx 32rpx 8rpx 32rpx;\n  box-sizing: border-box;\n  margin-bottom: 8rpx;\n  z-index: 2;\n}\n\n.welcome-card {\n  display: flex;\n  align-items: center;\n  background: rgba(255,255,255,0.13);\n  box-shadow: 0 4rpx 16rpx 0 rgba(80,60,180,0.10);\n  border-radius: 32rpx;\n  padding: 18rpx 32rpx 18rpx 24rpx;\n  backdrop-filter: blur(8rpx);\n  border: 1.5rpx solid rgba(255,255,255,0.18);\n}\n\n.ai-avatar {\n  font-size: 60rpx;\n  margin-right: 22rpx;\n  filter: drop-shadow(0 2rpx 8rpx #fff3);\n}\n\n.welcome-text {\n  display: flex;\n  flex-direction: column;\n}\n\n.welcome-title {\n  font-size: 36rpx;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 4rpx;\n  letter-spacing: 2rpx;\n  text-shadow: 0 2rpx 8rpx #4f00bc44;\n  font-family: 'PingFang SC', 'Microsoft YaHei', 'Arial', sans-serif;\n}\n\n.welcome-tip {\n  font-size: 26rpx;\n  color: #ffe7b7;\n  font-style: italic;\n  letter-spacing: 1rpx;\n  text-shadow: 0 1rpx 4rpx #7d1b7e33;\n  font-family: 'Fira Mono', 'Consolas', 'Arial', sans-serif;\n}\n\n.privacy-icon {\n  font-size: 28rpx;\n  margin-right: 8rpx;\n}\n\n.privacy-text {\n  font-size: 22rpx;\n  color: #b0b0c0;\n}\n</style>\n","import MiniProgramPage from '/Users/peggy/Documents/HBuilderProjects/AI EmoDetect/AIEmoDetect/pages/index/index.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","__values","uni","request"],"mappings":"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"}