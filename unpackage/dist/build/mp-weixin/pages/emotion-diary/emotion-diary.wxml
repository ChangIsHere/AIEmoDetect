<view id="{{r}}" change:eS="{{uV.sS}}" eS="{{$eS[r]}}" change:eA="{{uV.sA}}" eA="{{$eA[r]}}" class="{{['container', 'data-v-f13780e7', virtualHostClass]}}" style="{{virtualHostStyle}}" hidden="{{virtualHostHidden || false}}"><view class="header data-v-f13780e7"><text class="title data-v-f13780e7">情绪日记</text><text class="subtitle data-v-f13780e7">记录您的心情和烦恼</text></view><view class="diary-card animate-fade-in data-v-f13780e7"><text class="card-title data-v-f13780e7">今天您感觉如何？</text><view class="emotion-rating data-v-f13780e7"><view wx:for="{{a}}" wx:for-item="n" wx:key="b" class="{{['data-v-f13780e7', 'rating-star', n.c]}}" bindtap="{{n.d}}">{{n.a}}</view></view><text class="rating-label data-v-f13780e7">{{b}}</text><text class="card-title data-v-f13780e7">写下您的烦心事：</text><block wx:if="{{r0}}"><textarea class="diary-textarea data-v-f13780e7" placeholder="今天有什么让您烦恼的事情吗？或者想分享一些开心的事？" maxlength="-1" value="{{c}}" bindinput="{{d}}"/></block><button class="save-button data-v-f13780e7" bindtap="{{f}}"><uni-icons class="data-v-f13780e7" virtualHostClass="data-v-f13780e7" u-i="f13780e7-0" bind:__l="__l" u-p="{{e||''}}"></uni-icons><text class="data-v-f13780e7">保存日记</text></button></view><view class="chart-card animate-fade-in data-v-f13780e7"><text class="card-title data-v-f13780e7">近七天情绪趋势</text><view class="chart-placeholder data-v-f13780e7"><text class="data-v-f13780e7">情绪趋势图表</text><canvas canvas-id="emotionChart" id="emotionChart" class="charts data-v-f13780e7" type="2d" change:eS="{{uV.sS}}" eS="{{$eS[g]}}" change:eA="{{uV.sA}}" eA="{{$eA[g]}}"></canvas></view></view><view class="diary-list-card animate-fade-in data-v-f13780e7"><text class="card-title data-v-f13780e7">过往日记</text><scroll-view scroll-y class="diary-scroll-view data-v-f13780e7" enable-flex="true" enhanced="true"><view wx:for="{{h}}" wx:for-item="entry" wx:key="d" class="diary-entry data-v-f13780e7"><view class="entry-header data-v-f13780e7"><text class="entry-date data-v-f13780e7">{{entry.a}}</text><text class="entry-rating data-v-f13780e7">心情评分: {{entry.b}} / 5</text></view><text class="entry-content data-v-f13780e7">{{entry.c}}</text></view><view wx:if="{{i}}" class="no-entries data-v-f13780e7"><text class="data-v-f13780e7">暂无日记记录。</text></view></scroll-view></view><view class="ai-chat-card animate-fade-in data-v-f13780e7"><text class="card-title data-v-f13780e7">AI 情绪分析与鼓励</text><view class="chat-display data-v-f13780e7"><scroll-view scroll-y class="chat-scroll-view data-v-f13780e7" enable-flex="true" enhanced="true"><view wx:for="{{j}}" wx:for-item="message" wx:key="b" class="{{['data-v-f13780e7', 'chat-message', message.c]}}"><text class="data-v-f13780e7">{{message.a}}</text></view></scroll-view></view><view class="chat-input-area data-v-f13780e7"><input class="chat-input data-v-f13780e7" placeholder="想和AI聊聊最近的情绪吗？" bindconfirm="{{k}}" value="{{l}}" bindinput="{{m}}"/><button class="send-button data-v-f13780e7" bindtap="{{o}}"><uni-icons class="data-v-f13780e7" virtualHostClass="data-v-f13780e7" u-i="f13780e7-1" bind:__l="__l" u-p="{{n||''}}"></uni-icons></button></view></view><view class="control-buttons data-v-f13780e7"><button class="control-button exit-button data-v-f13780e7" bindtap="{{q}}"><uni-icons class="data-v-f13780e7" virtualHostClass="data-v-f13780e7" u-i="f13780e7-2" bind:__l="__l" u-p="{{p||''}}"></uni-icons><text class="data-v-f13780e7">退出</text></button></view></view><wxs src="/common/uniView.wxs" module="uV"/>
